{
    "name": "Lingua Franca",
    "scopeName": "text.lflang",
    "fileTypes": [
        "lf"
    ],
    "repository": {
        "global": {
            "patterns": [
                {
                    "include": "#linecomment"
                },
                {
                    "include": "#blockcomment"
                },
                {
                    "include": "#c-target"
                },
                {
                    "include": "#cpp-target"
                },
                {
                    "include": "#ts-target"
                },
                {
                    "include": "#py-target"
                }
            ]
        },
        "post-targetspec": {
            "patterns": [
                {
                    "include": "#context-insensitive"
                },
                {
                    "include": "#target-specification"
                },
                {
                    "include": "#import-statement"
                }
            ]
        },
        "context-insensitive": {
            "patterns": [
                {
                    "include": "#linecomment"
                },
                {
                    "include": "#blockcomment"
                },
                {
                    "include": "#reactor-declaration"
                },
                {
                    "include": "#reactor-block"
                },
                {
                    "include": "#preamble"
                },
                {
                    "include": "#input-output"
                },
                {
                    "include": "#action"
                },
                {
                    "include": "#state"
                },
                {
                    "include": "#type"
                },
                {
                    "include": "#number"
                },
                {
                    "include": "#string"
                },
                {
                    "include": "#array"
                }
            ]
        },
        "c-target": {
            "begin": "(?=^target C\\b)",
            "patterns": [
                {
                    "include": "#post-targetspec"
                },
                {
                    "begin": "(\\{=)",
                    "end": "(=\\})",
                    "name": "meta.embedded.block.c",
                    "patterns": [{
                        "include": "source.cpp"
                    }]
                }
            ]
        },
        "cpp-target": {
            "begin": "(?=^target Cpp\\b)",
            "patterns": [
                {
                    "include": "#post-targetspec"
                },
                {
                    "begin": "(\\{=)",
                    "end": "(=\\})",
                    "name": "meta.embedded.block.cpp",
                    "patterns": [{
                        "include": "source.cpp"
                    }]
                }
            ]
        },
        "ts-target": {
            "begin": "(?=^target TypeScript\\b)",
            "patterns": [
                {
                    "include": "#post-targetspec"
                },
                {
                    "begin": "(\\{=)",
                    "end": "(=\\})",
                    "name": "meta.embedded.block.ts",
                    "patterns": [{
                        "include": "source.ts"
                    }]
                }
            ]
        },
        "py-target": {
            "begin": "(?=^target Python\\b)",
            "patterns": [
                {
                    "include": "#post-targetspec"
                },
                {
                    "begin": "(\\{=)",
                    "end": "(=\\})",
                    "name": "meta.embedded.block.py",
                    "patterns": [{
                        "include": "source.python"
                    }]
                }
            ]
        },
        "target-specification": {
            "name": "meta.targetspec.lflang",
            "begin": "(?=^target\\b)",
            "end": ";|(?<=}.*)$|(?<=target[^\\{]*)$",
            "patterns": [
                {
                    "include": "#context-insensitive"
                },
                {
                    "name": "constant.language.lflang",
                    "match": "\\b(C|Cpp|Python|TypeScript)\\b"
                },
                {
                    "name": "keyword.control.lflang",
                    "match": "\\b(target)\\b"
                },
                {
                    "name": "variable.parameter.lflang",
                    "match": "(?<=(^|,|\\{)(\\s)*)\\b(\\w+)\\b(?=(\\s)*:)"
                }
            ]
        },
        "import-statement": {
            "begin": "(?=^import\\b)",
            "end": ";|(?<=}.*)$|(?<=import[^\\{]*)$",
            "patterns": [
                {
                    "include": "#context-insensitive"
                },
                {
                    "name": "keyword.control.import.lflang",
                    "match": "\\b(import)\\b|\\b(as)\\b|\\b(from)\\b"
                }
            ]
        },
        "linecomment": {
            "name": "comment.line.double-dash.lflang",
            "begin": "(^[ \\t]+)?(?=//)",
            "end": "(?=$)"
        },
        "blockcomment": {
            "name": "comment.block.lflang",
            "begin": "/\\*(\\*)?(?!/)",
            "end": "\\*/"
        },
        "reactor-declaration": {
            "patterns": [
                {
                    "name": "storage.modifier.lflang",
                    "match": "\\b(reactor)\\b|\\b(federated)\\b|\\b(main)\\b|\\b(realtime)\\b|\\b(at)\\b|\\b(extends)\\b"
                },
                {
                    "name": "entity.name.type.lflang",
                    "match": "(?<=\\breactor\\b)(\\s*)(?!at)(?!extends)(\\w+)\\b"
                }
            ]
        },
        "reactor-block": {
            "patterns": [
                {
                    "name": "keyword.control.lflang",
                    "match": "\\b(reaction)\\b"
                }
            ]
        },
        "preamble": {
            "patterns": [
                {
                    "name": "keyword.control.lflang",
                    "match": "\\b(preamble)\\b"
                }
            ]
        },
        "input-output": {
            "patterns": [
                {
                    "name": "storage.modifier.lflang",
                    "match": "\\b(input|output|mutable)\\b"
                }
            ]
        },
        "action": {
            "patterns": [
                {
                    "name": "storage.modifier.lflang",
                    "match": "\\b(logical|physical)\\b"
                },
                {
                    "name": "storage.modifier.lflang",
                    "match": "\\b(action)\\b"
                }
            ]
        },
        "state": {
            "patterns": [
                {
                    "name": "storage.modifier.lflang",
                    "match": "\\b(state)\\b"
                }
            ]
        },
        "type": {
            "patterns": [
                {
                    "name": "storage.type.lflang",
                    "match": "(?<=(input|output|action|state).*:(\\s*))(\\b(\\w*)\\b)"
                }
            ]
        },
        "number": {
            "patterns": [
                {
                    "name": "constant.numeric.lflang",
                    "match": "(?<!\\w)(\\-?\\d+)(.\\d+)?\\b"
                }
            ]
        },
        "string": {
            "patterns": [
            ]
        },
        "array": {
            "patterns": [
            ]
        }
    },
    "patterns": [
        {
            "include": "#global"
        }
    ],
    "uuid": "cd57a55d-0af5-4750-a6a0-3b7108553c2a"
}